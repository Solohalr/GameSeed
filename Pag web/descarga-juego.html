<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Descarga del Juego - Tu Plataforma de Juegos</title>

    <link rel="icon" type="image/png" href="Img/logo.png">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <style>
        /* === CALIFICACI√ìN Y COMENTARIOS CON ESTILO DE CUADRO === */
        .review-section {
            background: rgba(18, 18, 18, 0.85);
            border: 2px solid #73654A;
            border-radius: 8px;
            padding: 20px;
            margin-top: 40px;
        }

        .review-section h4 {
            color: #73654A;
            margin-bottom: 15px;
            text-align: center;
        }

        /* --- Estrellas --- */
        .rating {
            display: flex;
            flex-direction: row-reverse;
            justify-content: center;
            margin-bottom: 10px;
        }

        .rating input {
            display: none;
        }

        .rating label {
            font-size: 2rem;
            color: #555;
            cursor: pointer;
            transition: color 0.2s;
        }

        .rating input:checked~label,
        .rating label:hover,
        .rating label:hover~label {
            color: #73654A;
        }

        /* --- Promedio --- */
        .average-rating {
            text-align: center;
            color: #73654A;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        /* --- Caja de comentarios --- */
        .comment-box textarea {
            width: 100%;
            height: 120px;
            background: #1a1a1a;
            border: 2px solid #73654A;
            color: #fff;
            padding: 10px;
            border-radius: 8px;
            resize: none;
            font-family: 'Courier New', monospace;
        }

        .comment-box textarea:focus {
            outline: none;
            border-color: #73654A;
            box-shadow: 0 0 5px #73654A;
        }

        .comment-box button {
            background: #73654A;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            color: #121212;
            font-weight: bold;
            margin-top: 10px;
            cursor: pointer;
        }

        .comment-box button:hover {
            background: #73654A;
        }

        /* === COMENTARIOS MOSTRADOS === */
        .filter-comments {
            text-align: center;
            margin: 15px 0;
        }

        .filter-comments select {
            background: #1a1a1a;
            color: #73654A;
            border: 2px solid #73654A;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }

        .comment-list {
            margin-top: 20px;
            border-top: 2px solid #73654A;
            padding-top: 15px;
        }

        .comment-item {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #73654A;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .comment-item strong {
            color: #73654A;
        }
    </style>
</head>

<body class="descargas_juegos">
    <!-- Header -->
    <header class="header">
        <!-- üîπ Logo clickeable que lleva al index -->
        <a href="index.html" class="logo"></a>
        <nav class="nav-menu">
            <a href="iniciar-sesion.html">Iniciar Sesi√≥n</a>
            <a href="crear_cuenta.html">Crear Cuenta</a>
        </nav>
    </header>

    <!-- Sub Nav -->
    <nav class="sub-nav">
        <a href="index.html">Inicio</a>
        <a href="juegos-principales.html">Juegos</a>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <section class="main-content">
            <h2 class="section-title">Nombre del juego</h2>

            <!-- Carrusel de portada -->
            <div id="carouselPortada" class="carousel slide" data-bs-ride="false">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="Img/Juego 1.png" class="d-block w-100 portada-img" alt="Portada 1">
                    </div>
                    <div class="carousel-item">
                        <img src="Img/Juego2.png" class="d-block w-100 portada-img" alt="Portada 2">
                    </div>
                    <div class="carousel-item">
                        <img src="Img/Juego3.png" class="d-block w-100 portada-img" alt="Portada 3">
                    </div>
                    <div class="carousel-item">
                        <img src="Img/logo.png" class="d-block w-100 portada-img" alt="Portada 4">
                    </div>
                </div>

                <!-- Flechas de navegaci√≥n -->
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselPortada"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Anterior</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselPortada"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Siguiente</span>
                </button>
            </div>

            <!-- Miniaturas -->
            <div class="game-grid miniaturas mt-3">
                <div class="game-card"><img src="Img/Juego 1.png" alt="Miniatura 1" data-index="0"></div>
                <div class="game-card"><img src="Img/Juego2.png" alt="Miniatura 2" data-index="1"></div>
                <div class="game-card"><img src="Img/Juego3.png" alt="Miniatura 3" data-index="2"></div>
                <div class="game-card"><img src="Img/logo.png" alt="Miniatura 4" data-index="3"></div>
            </div>

            <button class="btn" style="float: right; margin-top: 20px;">Descargar</button>

            <div style="clear: both; margin-top: 30px;">
                <h3>Descripci√≥n:</h3>
                <p>Juego basado en el libro viaje al centro de la tierra.</p>
            </div>

            <!-- Requisitos -->
            <div class="game-details">
                <div class="requirements">
                    <h4>M√≠nimos</h4>
                    <p><strong>Procesador: ryzen 5 5500u.</strong> </p>
                    <p><strong>Gr√°ficas: AMD radeon graphics 5.</strong> </p>
                    <p><strong>Memoria Ram: 8gb.</strong> </p>
                    <p><strong>Almacenamiento: 2gb.</strong> </p>
                </div>
                <div class="requirements">
                    <h4>Recomendados</h4>
                    <p><strong>Procesador:</strong> </p>
                    <p><strong>Gr√°ficas:</strong> </p>
                    <p><strong>Memoria Ram:</strong> </p>
                    <p><strong>Almacenamiento:</strong> </p>
                </div>
            </div>

            <!-- Secci√≥n de calificaci√≥n y comentarios (debajo de los requisitos) -->
            <div class="review-section">
                <h4>Califica este juego</h4>
                <div class="rating">
                    <input type="radio" name="star" id="star5"><label for="star5">‚òÖ</label>
                    <input type="radio" name="star" id="star4"><label for="star4">‚òÖ</label>
                    <input type="radio" name="star" id="star3"><label for="star3">‚òÖ</label>
                    <input type="radio" name="star" id="star2"><label for="star2">‚òÖ</label>
                    <input type="radio" name="star" id="star1"><label for="star1">‚òÖ</label>
                </div>

                <div class="average-rating">
                    Promedio actual: <span id="averageRating">0.0</span> ‚≠ê
                </div>

                <div class="comment-box">
                    <h4>Deja tu comentario</h4>
                    <textarea placeholder="Escribe aqu√≠ tu opini√≥n sobre el juego..."></textarea>
                    <button>Enviar</button>
                </div>

                <!-- Filtro de comentarios -->
                <div class="filter-comments">
                    <label for="filterSelect">Filtrar por estrellas:</label>
                    <select id="filterSelect">
                        <option value="0">Todos</option>
                        <option value="5">5 estrellas</option>
                        <option value="4">4 estrellas</option>
                        <option value="3">3 estrellas</option>
                        <option value="2">2 estrellas</option>
                        <option value="1">1 estrella</option>
                    </select>
                </div>

                <!-- Lista de comentarios -->
                <div class="comment-list" id="commentList">
                    <h4 style="color: #936C00; text-align:center;">Comentarios de jugadores</h4>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        &copy; 2025 GameSeed. Todos los derechos reservados.
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script personalizado -->
    <script>
        const carousel = new bootstrap.Carousel(document.querySelector('#carouselPortada'));
        const thumbnails = document.querySelectorAll('.miniaturas .game-card img');
        const stars = document.querySelectorAll('.rating input');
        const commentButton = document.querySelector('.comment-box button');
        const commentText = document.querySelector('.comment-box textarea');
        const commentList = document.querySelector('#commentList');
        const filterSelect = document.querySelector('#filterSelect');
        const averageDisplay = document.querySelector('#averageRating');

        let userRating = 0;
        let ratings = [];
        let comments = [];

        // Carrusel miniaturas
        thumbnails.forEach(img => {
            img.addEventListener('click', () => {
                const index = parseInt(img.dataset.index);
                carousel.to(index);
                thumbnails.forEach(i => i.classList.remove('active-thumb'));
                img.classList.add('active-thumb');
            });
        });
        thumbnails[0].classList.add('active-thumb');

        // Calificaci√≥n seleccionada
        stars.forEach((star, index) => {
            star.addEventListener('change', () => {
                userRating = 5 - index;
            });
        });

        // Enviar comentario
        commentButton.addEventListener('click', () => {
            const text = commentText.value.trim();
            if (!text) {
                alert("Por favor escribe un comentario antes de enviar.");
                return;
            }

            const rating = userRating || 0;
            comments.push({ text, rating });
            if (rating > 0) ratings.push(rating);

            updateAverage();
            renderComments();

            commentText.value = "";
            stars.forEach(s => s.checked = false);
            userRating = 0;
        });

        // Actualizar promedio
        function updateAverage() {
            if (ratings.length === 0) {
                averageDisplay.textContent = "0.0";
                return;
            }
            const avg = ratings.reduce((a, b) => a + b, 0) / ratings.length;
            averageDisplay.textContent = avg.toFixed(1);
        }

        // Renderizar comentarios
        function renderComments() {
            commentList.innerHTML = '<h4 style="color: #936C00; text-align:center;">Comentarios de jugadores</h4>';
            const filterValue = parseInt(filterSelect.value);
            const filtered = filterValue === 0 ? comments : comments.filter(c => c.rating === filterValue);

            if (filtered.length === 0) {
                commentList.innerHTML += `<p style="text-align:center; color:#aaa;">No hay comentarios para este filtro.</p>`;
                return;
            }

            filtered.forEach(c => {
                const item = document.createElement('div');
                item.classList.add('comment-item');
                item.innerHTML = `<strong>Jugador an√≥nimo</strong> ‚≠ê ${c.rating || "Sin calificar"}<br>${c.text}`;
                commentList.appendChild(item);
            });
        }

        // Filtro de comentarios
        filterSelect.addEventListener('change', renderComments);
    </script>
</body>

</html>